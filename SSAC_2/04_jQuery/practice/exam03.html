<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>일정 관리 캘린더</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: Arial, sans-serif;
      }

      .calendar {
        width: 400px;
        margin: 20px;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        background-color: #f0f0f0;
      }

      .days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        text-align: center;
        background-color: #e0e0e0;
      }

      .days div {
        padding: 5px;
        border: 1px solid #ccc;
      }

      .dates {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
      }

      .date-cell {
        height: 80px;
        border: 1px solid #ccc;
        padding: 5px;
        cursor: pointer;
        overflow: auto;
      }

      .date-cell:hover {
        background-color: #f0f0f0;
      }

      .schedule {
        font-size: 12px;
        margin: 2px 0;
        padding: 2px;
        background-color: #e3f2fd;
        border-radius: 3px;
      }

      .input-section {
        margin: 20px;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }

      input,
      button {
        margin: 5px;
        padding: 5px;
      }

      .sunday {
        color: red;
      }
      .saturday {
        color: blue;
      }
    </style> -->
    /
  </head>
  <body>
    <div class="calendar">
      <div class="header">
        <button id="prevMonth">&lt;</button>
        <h2 id="monthDisplay"></h2>
        <button id="nextMonth">&gt;</button>
      </div>
      <div class="days">
        <div class="sunday">일</div>
        <div>월</div>
        <div>화</div>
        <div>수</div>
        <div>목</div>
        <div>금</div>
        <div class="saturday">토</div>
      </div>
      <div class="dates" id="datesContainer"></div>
    </div>

    <div class="input-section">
      <input type="text" id="selectedDate" readonly placeholder="날짜 선택" />
      <input type="text" id="scheduleInput" placeholder="일정 입력" />
      <button id="addSchedule">등록</button>
    </div>

    <script>
      $(document).ready(function () {
        let currentDate = new Date();
        let schedules = {};

        function updateCalendar() {
          const year = currentDate.getFullYear();
          const month = currentDate.getMonth();

          // 달력 헤더 업데이트
          $('#monthDisplay').text(`${year}년 ${month + 1}월`);

          const $datesContainer = $('#datesContainer');
          $datesContainer.empty();

          // 해당 월의 첫날과 마지막 날 구하기
          const firstDay = new Date(year, month, 1);
          const lastDay = new Date(year, month + 1, 0);

          // 첫날의 요일만큼 빈 셀 추가
          for (let i = 0; i < firstDay.getDay(); i++) {
            $datesContainer.append($('<div>').addClass('date-cell'));
          }

          // 날짜 채우기
          for (let date = 1; date <= lastDay.getDate(); date++) {
            const $dateCell = $('<div>').addClass('date-cell');
            const $dateNumber = $('<div>').text(date);

            // 주말 색상 처리
            const dayOfWeek = new Date(year, month, date).getDay();
            if (dayOfWeek === 0) $dateNumber.addClass('sunday');
            if (dayOfWeek === 6) $dateNumber.addClass('saturday');

            $dateCell.append($dateNumber);

            // 해당 날짜의 일정이 있으면 표시
            const dateString = `${year}-${(month + 1).toString().padStart(2, '0')}-${date.toString().padStart(2, '0')}`;
            if (schedules[dateString]) {
              const $scheduleDiv = $('<div>').addClass('schedule').text(schedules[dateString]);
              $dateCell.append($scheduleDiv);
            }

            // 날짜 클릭 이벤트
            $dateCell.on('click', function () {
              $('#selectedDate').val(dateString);
            });

            $datesContainer.append($dateCell);
          }
        }

        // 이전 달 버튼 클릭
        $('#prevMonth').on('click', function () {
          currentDate.setMonth(currentDate.getMonth() - 1);
          updateCalendar();
        });

        // 다음 달 버튼 클릭
        $('#nextMonth').on('click', function () {
          currentDate.setMonth(currentDate.getMonth() + 1);
          updateCalendar();
        });

        // 일정 등록 버튼 클릭
        $('#addSchedule').on('click', function () {
          const selectedDate = $('#selectedDate').val();
          const scheduleText = $('#scheduleInput').val();

          if (!selectedDate || !scheduleText) {
            alert('날짜와 일정을 모두 입력해주세요!');
            return;
          }

          schedules[selectedDate] = scheduleText;
          $('#scheduleInput').val('');
          updateCalendar();
        });

        // Enter 키로 일정 등록
        $('#scheduleInput').on('keypress', function (e) {
          if (e.which === 13) {
            $('#addSchedule').click();
          }
        });

        // 초기 캘린더 표시
        updateCalendar();
      });
    </script>
  </body>
</html>
